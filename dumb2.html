<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Pace Assigner</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/javascript-lp-solver/prod/solver.js"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        'primary': '#4f46e5',
                        'secondary': '#f97316',
                        'background': '#f3f4f6',
                        'card': '#ffffff',
                    },
                    fontFamily: {
                        sans: ['Inter', 'sans-serif'],
                    },
                }
            }
        }
    </script>
    <style>
        br {
            display: block;
            content: "";
            margin-top: .25rem;
        }

        .pace-checkbox:checked+label {
            background-color: #4f46e5;
            color: white;
            border-color: #4f46e5;
        }

        .success {
            color: #10b981;
        }

        .error {
            color: #ef4444;
        }

        /* Styles from original file */
        /* ... (The rest of your original CSS/Tailwind definitions) ... */

        /* Custom style for drag indicator */
        .runner-bubble:hover {
            cursor: grab;
        }

        .runner-bubble:active {
            cursor: grabbing;
        }

        /* Highlighting for drop zone */
        .drag-over {
            box-shadow: 0 0 0 4px rgba(79, 70, 229, 0.5);
        }
    </style>
    </head>

<body class="bg-background min-h-screen p-4 sm:p-8 font-sans">

    <div class="max-w-6xl mx-auto">
        <header class="text-center mb-4">
            <h1 class="text-3xl sm:text-4xl font-extrabold text-gray-900 mb-2">Pace Assigner</h1>
        </header>



        <div class="bg-card shadow-xl rounded-xl p-6 sm:p-8">
            <h2 class="text-2xl font-semibold text-primary mb-4 border-b pb-3">Assignment Results</h2>
            <p id="status" class="success font-bold text-lg mb-4">Status: Done!</p>

            <div id="results-display" class="space-y-4">
                <h3 class="font-semibold text-lg text-gray-800 pb-2">Assignments by Pace Group</h3>
                <div id="groups-list" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4">

                    <div id="pace-800" class="pace-group p-4 bg-white shadow rounded-lg border-l-4 border-primary"
                        ondragover="allowDrop(event)" ondrop="drop(event)" ondragenter="dragEnter(event)" ondragleave="dragLeave(event)">
                        <p class="font-bold text-md mb-2">8:00 min/mile <span
                                class="pace-count text-gray-500 font-normal">(1 runners)</span></p>
                        <div class="pace-runners flex flex-wrap">
                            <span id="runner-2" class="runner-bubble inline-block bg-primary/20 text-primary px-2 py-0.5 text-xs font-medium rounded-full m-0.5"
                                draggable="true" ondragstart="drag(event)">asdfasdfa (2)</span>
                        </div>
                    </div>

                    <div id="pace-830" class="pace-group p-4 bg-white shadow rounded-lg border-l-4 border-primary"
                        ondragover="allowDrop(event)" ondrop="drop(event)" ondragenter="dragEnter(event)" ondragleave="dragLeave(event)">
                        <p class="font-bold text-md mb-2">8:30 min/mile <span
                                class="pace-count text-gray-500 font-normal">(1 runners)</span></p>
                        <div class="pace-runners flex flex-wrap">
                            <span id="runner-1" class="runner-bubble inline-block bg-primary/20 text-primary px-2 py-0.5 text-xs font-medium rounded-full m-0.5"
                                draggable="true" ondragstart="drag(event)">asdfasdf (1)</span>
                        </div>
                    </div>

                    <div id="pace-900" class="pace-group p-4 bg-white shadow rounded-lg border-l-4 border-primary"
                        ondragover="allowDrop(event)" ondrop="drop(event)" ondragenter="dragEnter(event)" ondragleave="dragLeave(event)">
                        <p class="font-bold text-md mb-2">9:00 min/mile <span
                                class="pace-count text-gray-500 font-normal">(1 runners)</span></p>
                        <div class="pace-runners flex flex-wrap">
                            <span id="runner-3" class="runner-bubble inline-block bg-primary/20 text-primary px-2 py-0.5 text-xs font-medium rounded-full m-0.5"
                                draggable="true" ondragstart="drag(event)">asdfasdfasdf (3)</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <br>
    </div>

    <script>
        // Store the ID of the dragged runner
        function drag(ev) {
            ev.dataTransfer.setData("text", ev.target.id);
            // Optional: Add a class to the original element to make it appear 'lifted' or semi-transparent
            setTimeout(() => {
                ev.target.style.opacity = '0.4';
            }, 0);
        }

        // Allow the element to be dropped
        function allowDrop(ev) {
            ev.preventDefault();
            // Optional: Highlight the drop zone on drag over (handled by dragEnter/dragLeave)
        }

        // Apply a visual cue when dragging enters a valid drop target
        function dragEnter(ev) {
            if (ev.target.closest('.pace-group')) {
                ev.target.closest('.pace-group').classList.add('drag-over');
            }
        }

        // Remove the visual cue when dragging leaves the drop target
        function dragLeave(ev) {
            if (ev.target.closest('.pace-group')) {
                ev.target.closest('.pace-group').classList.remove('drag-over');
            }
        }

        // Handle the drop event
        function drop(ev) {
            ev.preventDefault();
            const runnerId = ev.dataTransfer.getData("text");
            const runnerElement = document.getElementById(runnerId);

            // Get the drop target, ensuring it is the pace-group div
            const dropTarget = ev.target.closest('.pace-group');

            if (dropTarget) {
                // Find the pace-runners container within the drop target
                const runnerContainer = dropTarget.querySelector('.pace-runners');

                if (runnerContainer) {
                    runnerContainer.appendChild(runnerElement);
                    // Remove the opacity/visual lift from the runner element
                    runnerElement.style.opacity = '1';

                    // Remove the drop zone highlight
                    dropTarget.classList.remove('drag-over');

                    // OPTIONAL: Update runner counts (advanced, not implemented here)
                    // You would need to iterate through all .pace-runners and update the associated .pace-count span.
                }
            }
        }

        // Initialize drag and drop events (for mobile compatibility or general cleanup)
        document.addEventListener('dragend', (ev) => {
            // Revert opacity/styles if drag was cancelled or finished
            if (ev.target.classList.contains('runner-bubble')) {
                ev.target.style.opacity = '1';
            }
            // Clean up highlights in case dragend occurred outside a drop
            document.querySelectorAll('.drag-over').forEach(el => el.classList.remove('drag-over'));
        });

    </script>

</body>

</html>
